<div class="operate-transaction-page">
	<mat-card class="operate-transaction-card">
		<mat-card-title>
			<p>{{id === "new" ? "Create transaction" : "Update transaction"}}</p>
			<button mat-icon-button (click)="onClose()"><mat-icon>close</mat-icon></button>
		</mat-card-title>
		<mat-card-content>
			<form [formGroup]="form" (ngSubmit)="onFormSubmit()">
				<mat-divider></mat-divider>
				<div class="content__destinations">
					<mat-form-field appearance="outline">
						<mat-label>From</mat-label>
						<mat-select
							panelClass="operate-transaction-page__mat-select"
							formControlName="from"
						>
							<mat-select-trigger>
								<mat-icon>{{form.value.from?.icon_name}}</mat-icon>
								&nbsp;{{form.value.from?.name}}
							</mat-select-trigger>
							<mat-option *ngFor="let entity of getFromEntities()" [value]="entity">
								<mat-icon>{{entity.icon_name}}</mat-icon>{{entity.name}}
							</mat-option>
						</mat-select>
					</mat-form-field>
					<mat-form-field appearance="outline">
						<mat-label>To</mat-label>
						<mat-select
							panelClass="operate-transaction-page__mat-select"
							formControlName="to"
						>
							<mat-select-trigger>
								<mat-icon>{{form.value.to?.icon_name}}</mat-icon>
								&nbsp;{{form.value.to?.name}}
							</mat-select-trigger>
							<mat-option *ngFor="let entity of getToEntities()" [value]="entity">
								<mat-icon>{{entity.icon_name}}</mat-icon>{{entity.name}}
							</mat-option>
						</mat-select>
					</mat-form-field>
				</div>
				<mat-divider></mat-divider>
				<div class="content__amount">
					<mat-form-field appearance="standard">
						<mat-label>Amount</mat-label>
						<input matInput type="number" placeholder="9.99" formControlName="amount" />
						<span matSuffix>{{subject.currency_to}}</span>
					</mat-form-field>
				</div>
				<mat-divider></mat-divider>
				<div class="content__additional">
					<mat-form-field appearance="standard">
						<mat-label>Location</mat-label>
						<input
							matInput
							type="text"
							placeholder="Local shop"
							formControlName="location"
						/>
					</mat-form-field>
					<mat-form-field appearance="standard">
						<mat-label>Notes</mat-label>
						<input
							matInput
							type="text"
							placeholder="Some notes"
							formControlName="notes"
						/>
					</mat-form-field>
				</div>
				<div class="content__date" (click)="picker.open()">
					<input type="hidden" [matDatepicker]="picker" formControlName="date" />
					<span class="date__output">
						{{form.value.date | date: "fullDate" | uppercase}}
					</span>
					<mat-datepicker touchUi #picker></mat-datepicker>
				</div>
				<button
					mat-raised-button
					type="submit"
					color="primary"
					[disabled]="form.status !== 'VALID'"
				>
					{{id === "new" ? "Create" : "Update"}}
				</button>
			</form>
		</mat-card-content>
	</mat-card>
</div>
